"use strict";function MainCtrl(){}function TodoCtrl(a,b,c,d,e,f){b.formData={},b.formDataHall={},b.halls=f.data,d.get("/api/todos").success(function(a){b.todos=a,console.log(a)}).error(function(a){console.log("Error: "+a)}),b.createTodo=function(){d.post("/api/todos",b.formData).success(function(a){b.formData={},b.todos=a,console.log("Todos:",a)}).error(function(a){console.log("Error: "+a)})},b.deleteTodo=function(a){d["delete"]("/api/todos/"+a).success(function(a){b.todos=a,console.log(a)}).error(function(a){console.log("Error: "+a)})},b.createHall=function(){e.create(b.formDataHall).success(function(a){b.formDataHall={},b.halls=a,console.log("Halls:",a)}).error(function(a){console.log("Error: "+a)})},b.deleteHall=function(a){e["delete"](a).success(function(a){b.halls=a,console.log("Halls:",a)}).error(function(a){console.log("Error: "+a)})}}function SearchCtrl(a,b,c,d){d.get().success(function(b){a.data=b}),console.log(a.data)}function TestCtrl(a){a.test="Hello, world!"}function NotFoundCtrl(){}function AuthCtrl(a,b,c){a.credentials={email:"",password:""},a.err_msg_passport=null,a.clear_err_msg=function(){a.err_msg_passport=null},a.login=function(d){return d.$valid?(c.login(a.credentials).success(function(){}).error(function(b){a.err_msg_passport=b.error}),void(a.loggedIn=b.get("authenticated"))):void console.log("You've bypassed disabled button, huh?\n You shall not pass!")},a.signup=function(){c.signup(a.credentials)}}function NavCtrl(a,b,c){a.logged_in=function(){return c.get("authenticated")},a.get_username=function(){return c.get("username")},a.logout=function(){b.logout()}}!function(){var a;a=angular.module("RHalls",["ui.bootstrap","ui.router","angucomplete"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){c.html5Mode(!0),b.otherwise("/404"),a.state("home",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("login",{url:"/login",templateUrl:"views/login.html",controller:"AuthCtrl"}).state("signup",{url:"/signup",templateUrl:"views/signup.html",controller:"AuthCtrl"}).state("todo",{url:"/todo",templateUrl:"views/todo.html",controller:"TodoCtrl",resolve:{halls:function(a){return a.get()}}}).state("404",{url:"/404",templateUrl:"views/404.html",controller:"NotFoundCtrl"}).state("test",{url:"/test",templateUrl:"views/test.html",controller:"TestCtrl"}).state("search",{url:"/search",templateUrl:"views/search.html",controller:"SearchCtrl"}).state("about",{url:"/about",templateUrl:"views/about.html"}).state("contact",{url:"/contact",templateUrl:"views/contact.html"})}]).run(["$rootScope",function(a){a.$on("$routeChangeStart",function(){})}])}(),angular.module("RHalls").directive("csvg",function(){return{templateUrl:function(a,b){return b.src}}}),angular.module("RHalls").directive("vspace",function(){return{template:function(a,b){return'<div style="width:100%;margin:0px;height:'+b.height+';"></div>'}}}),angular.module("RHalls").factory("$hall",["$http",function(a){return{get:function(){return a.get("/api/halls")},create:function(b){return a.post("/api/halls/",b)},"delete":function(b){return a["delete"]("/api/halls/"+b)}}}]),angular.module("RHalls").factory("$auth",["$http","$session","$location","$rootScope",function(a,b,c,d){var e=function(a){b.set("authenticated",a.success),b.set("token",a.token),b.set("username",a.user.local.email)},f=function(){b.unset("authenticated"),b.unset("token"),b.unset("username")},g=null;d.user=null;var h=!1;return d.loggedIn=!1,{signup:function(b){var c=a.post("auth/signup",b);return c.success(function(a){console.log(a)}).error(function(a){throw a}),c},login:function(b){var f=a.post("/auth/login",b);return f.success(function(a){return console.log(a),a?(g=d.user=a,c.path("/"),void e(a)):void console.log("log in fail")}).error(function(a){console.log(a.error)}),f},logout:function(){var b=a.get("/auth/logout");return b.success(function(){f(),d.loggedIn=!1}),b},user:function(){return g},check:function(){return h}}}]),angular.module("RHalls").factory("$session",[function(){return{set:function(a,b){return sessionStorage.setItem(a,b)},get:function(a){return sessionStorage.getItem(a)},unset:function(a){return sessionStorage.removeItem(a)}}}]),angular.module("RHalls").controller("MainCtrl",MainCtrl),angular.module("RHalls").controller("TodoCtrl",TodoCtrl),angular.module("RHalls").controller("SearchCtrl",SearchCtrl),angular.module("RHalls").controller("TestCtrl",TestCtrl),angular.module("RHalls").controller("NotFoundCtrl",NotFoundCtrl),angular.module("RHalls").controller("AuthCtrl",["$scope","$session","$auth",AuthCtrl]),angular.module("RHalls").controller("NavCtrl",["$scope","$auth","$session",NavCtrl]);